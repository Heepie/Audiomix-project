{% load static %}

<div id="popup-layer" class="dim-layer">
    <div class="dimBg"></div>
    <div id="sign-in" class="pop-layer">
        <div class="pop-container">
            <div class="pop-conts">
                <!--Sign-in contents-->
                <img class="soundhub-logo" src="{% static 'img/soundhub-logo.png' %}" alt="">
                <h3 class="signin-title">Sign in</h3>
                <form action="{% url 'views:user:sign-in' %}" method="post">
                    {% csrf_token %}
                    {% for field in sign_in %}
                    <div class="form-field">
                        {{ field }}
                    </div>
                    {% endfor %}
                    <input type="submit" class="submit-btn transition" value="Sign in">
                </form>
                <div class="btn-r">
                    <h3 class="social-signin">or continue with...</h3>
                    <div class="social-wrapper">
                        <a href="https://www.facebook.com/v2.11/dialog/oauth?client_id=188997225020523
                        &scope=user_friends,email,public_profile
                        &redirect_uri={{ request.scheme }}://{{ request.META.HTTP_HOST }}{% url 'views:user:fb-login' %}">
                            <img class="fb-btn" src="{% static 'img/facebook.png' %}" alt="">
                            <span class="fb-text">Facebook</span>
                        </a>
                        <a onclick="google_login()"><img class="gg-btn" src="{% static 'img/google.png' %}" alt=""><span class="fb-text">Google</span></a>
                    </div>
                    <a onclick="close_google_login()" href="#" class="btn-layerClose transition">Close</a>
                </div>
                <!--End of sign-in contents-->
            </div>
        </div>
    </div>
</div>
<script async src="https://smartlock.google.com/client"></script>
<script>
    function google_login() {
        const hintPromise = googleyolo.hint({
            supportedAuthMethods: [
                "https://accounts.google.com"
            ],
            supportedIdTokenProviders: [
                {
                    uri: "https://accounts.google.com",
                    clientId: "{{ google_client_id }}"
                }
            ]
        });
    }

    function close_google_login() {
        googleyolo.cancelLastOperation().then(() => {
            // Credential selector closed.
        });
    }
</script>